#################################################
## Canal Instance Configuration for 'example'
## This file configures MySQL connection settings
#################################################

#################################################
## MySQL Connection Settings
#################################################
# MySQL server address (use host.docker.internal to access host MySQL)
canal.instance.master.address = host.docker.internal:3306

# MySQL credentials for Canal (must have REPLICATION SLAVE privilege)
# 注意：生产环境应该创建专门的canal用户并授予REPLICATION SLAVE权限
# 开发环境可以使用root用户
canal.instance.dbUsername = root
canal.instance.dbPassword = root

# Connection charset
canal.instance.connectionCharset = UTF-8

# Default database name
canal.instance.defaultDatabaseName = codestyle

#################################################
## Table Filter Configuration
#################################################
# Subscribe to all tables in codestyle database
canal.instance.filter.regex = codestyle\\..*

# Black list filter (tables to exclude)
canal.instance.filter.black.regex =

#################################################
## Binlog Position Configuration
#################################################
# 设置为空，从上次的位置继续（推荐）
# 如果需要从头开始，可以设置具体的位置
# canal.instance.master.journal.name =
# canal.instance.master.position =
# canal.instance.master.timestamp =
# 从最新的位置开始（如果meta.log中的位置太旧，可能导致丢失消息）
# 注意：这会导致从当前binlog位置开始，不会读取历史消息
canal.instance.master.journal.name =
canal.instance.master.position =
canal.instance.master.timestamp =

#################################################
## Instance Settings
#################################################
# Enable GTID mode (if MySQL supports it)
canal.instance.gtidon = false

# TSDB (Table Schema Database) configuration
# 禁用TSDB以避免连接问题（如果MySQL连接有问题，TSDB会导致解析失败）
canal.instance.tsdb.enable = false

#################################################
## MQ (Kafka) Topic Configuration
## 参考: https://help.aliyun.com/zh/apsaramq-for-kafka/cloud-message-queue-for-kafka/use-cases/use-canal-to-synchronize-data-from-a-mysql-database-to-message-queue-for-apache-kafka
#################################################
# Kafka topic for data changes
canal.mq.topic = data-change

# Partition settings
canal.mq.partition = 0
