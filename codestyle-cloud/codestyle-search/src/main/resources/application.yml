spring:
  elasticsearch:
    uris: http://localhost:9200 # 需要配置为es服务的地址
    #    username: elastic
    #    password: changeme
    connection-timeout: 5s
    socket-timeout: 30s

  # 应用配置
  application:
    name: code-template-search

# 服务器配置
server:
  port: 9001
  tomcat:
    # 最大连接数
    max-connections: 10000
    # 连接超时时间，单位毫秒，适当延长
    connection-timeout: 60000
    # 保持连接的超时时间
    keep-alive-timeout: 30000
    # 最大保持连接请求数
    max-keep-alive-requests: 1000
    threads:
      max: 500
      min-spare: 10
  servlet:
    context-path: /api


# ES检索的一些配置
elasticsearch:
  search:
    async:
      thread:
        pool:
          core-pool-size: 12 # 异步查询的核心线程数 建议保证为CPU核心数目的2倍
          max-pool-size:  24    # 异步查询的最大线程数 建议保证为CPU核心数目的4倍
          queue-capacity: 400  # 异步查询的等待队列容量
    use-connection-init-query: true # 使用测试查询进行预热查询策略
    pre-heat-word: redis # 预热查询采用的关键字
    homepage:
      # 搜索相关性配置
      minimum-should-match: "75%"  # 从75%调整为90%
      timeout-ms: 400 # 单位是毫秒
      terminate-after: 5000
      track-total-hits: false



      # 字段权重配置

      boost-factors:

        file-name-boost-factor: 2.0

        file-description-boost-factor: 3.0
        project-description-boost-factor: 2.0

      # 短语匹配配置
      phrase-slops:
        filename-slop: 2
        file-description-slop: 2
        project-description-slop: 2
      source-includes:
        - "fileName"
        - "description"
        - "projectDescription"
        - "filePath"
        - "version"
        - "fileId"
        - "groupId"
        - "artifactId"

